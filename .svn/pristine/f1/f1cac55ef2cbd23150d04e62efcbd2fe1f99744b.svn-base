<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
			PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
			"http://ibatis.apache.org/dtd/sql-map-2.dtd">
			
<sqlMap namespace="album">
	
	<!-- 앨범 단일 조회 -->
	<select id="selectAlbum" resultClass="albumVO" parameterClass="albumVO">
		select album_id, album_name, album_date, album_like from album where album_id = #album_id# or album_name = #album_name#
	</select>
	
	<!-- 앨범 전체 조회 -->
	<select id="selectAllAlbum" resultClass="albumVO">
		select distinct a.album_name as album_name, b.artist_name as artist_name,
		to_char(album_date, 'YYYY-MM-DD') as album_date, a.album_id as album_id, a.album_img as album_img, b.artist_name as artist_name
		from album a, artist b
		where a.artist_id = b.artist_id
	</select>
	
	<!-- 앨범 추가 -->
	<insert id="insertAlbum" parameterClass="albumVO">
		insert into album (album_id, album_name, album_date, album_like, album_img, artist_id)
				values(album_seq.nextval, #album_name#, to_date(#album_date#, 'YYYY-MM-DD'), #album_like#, #album_img#, #artist_id#)
	</insert>
	
	<!-- 앨범 수정 -->
	<update id="updateAlbum" parameterClass="albumVO">
		update album set album_name = #album_name#,
						 album_date = to_date(#album_date#, 'YYYY-MM-DD'),
						 album_like = #album_like#,
						 artist_id = #artist_id#,
						 album_img = #album_img#
		where album_id = #album_id#
	</update>
	
	<!-- 앨범 삭제 -->
	<delete id="deleteAlbum" parameterClass="albumVO">
		delete from album where album_id = #album_id#
	</delete>
	
</sqlMap>